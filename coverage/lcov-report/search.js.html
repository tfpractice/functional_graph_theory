<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for search.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="prettify.css" />
    <link rel="stylesheet" href="base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="index.html">All files</a> search.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">26.03% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>19/73</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/23</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/31</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">35.19% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>19/54</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { collections, } from 'turmeric-utils';
&nbsp;
const { addBinSet, lastK, hasK, mapDiff, diff, addBinMap, } = collections;
const { spread, spreadK, spreadV, popFirst, tuple, } = collections;
&nbsp;
const pathVal = <span class="fstat-no" title="function not covered" >(p</span>red = <span class="branch-0 cbranch-no" title="branch not covered" >null)</span> =&gt; <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(l</span>ength = <span class="branch-0 cbranch-no" title="branch not covered" >1)</span> =&gt; <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(w</span>eight = <span class="branch-0 cbranch-no" title="branch not covered" >0)</span> =&gt;</span></span>
  (<span class="cstat-no" title="statement not covered" >{ pred, length, weight })</span>;
&nbsp;
const addSrc = <span class="fstat-no" title="function not covered" >(p</span>ath = <span class="branch-0 cbranch-no" title="branch not covered" >new Map)</span> =&gt; <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >sr</span>c =&gt;</span>
<span class="cstat-no" title="statement not covered" >  path.set(src, { pred: lastK(path), weight: 0, length: 1 });</span>
&nbsp;
export const initPath = <span class="fstat-no" title="function not covered" >no</span>de =&gt; <span class="cstat-no" title="statement not covered" >addSrc()(node);</span>
export const ptW = <span class="fstat-no" title="function not covered" >({</span> weight = <span class="branch-0 cbranch-no" title="branch not covered" >0 </span>}) =&gt; <span class="cstat-no" title="statement not covered" >weight;</span>
export const ptL = <span class="fstat-no" title="function not covered" >({</span> length = <span class="branch-0 cbranch-no" title="branch not covered" >1 </span>}) =&gt; <span class="cstat-no" title="statement not covered" >length;</span>
export const lastVal = <span class="fstat-no" title="function not covered" >pa</span>th =&gt; <span class="cstat-no" title="statement not covered" >path.get(lastK(path));</span>
export const lastW = <span class="fstat-no" title="function not covered" >pa</span>th =&gt; <span class="cstat-no" title="statement not covered" >ptW(lastVal(path));</span>
export const lastL = <span class="fstat-no" title="function not covered" >pa</span>th =&gt; <span class="cstat-no" title="statement not covered" >ptL(lastVal(path));</span>
export const nextW = <span class="fstat-no" title="function not covered" >pa</span>th =&gt; <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(w</span> = <span class="branch-0 cbranch-no" title="branch not covered" >0)</span> =&gt; <span class="cstat-no" title="statement not covered" >lastW(path) + w;</span></span>
export const nextL = <span class="fstat-no" title="function not covered" >pa</span>th =&gt; <span class="cstat-no" title="statement not covered" >lastL(path) ? lastL(path) + 1 : 1;</span>
&nbsp;
export const nextPath = <span class="fstat-no" title="function not covered" >(p</span>ath = <span class="branch-0 cbranch-no" title="branch not covered" >new Map,</span> [ n, w = <span class="branch-0 cbranch-no" title="branch not covered" >0 </span>]) =&gt;
<span class="cstat-no" title="statement not covered" >  path.set(n, pathVal(lastK(path))(nextL(path))(nextW(path)(w)));</span>
&nbsp;
export const dfs = <span class="fstat-no" title="function not covered" >ed</span>ges =&gt; <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(s</span>rc) =&gt; {</span>
  const trav = <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(p</span>ath = <span class="branch-0 cbranch-no" title="branch not covered" >initPath(src),</span> [ n, w ] = <span class="branch-0 cbranch-no" title="branch not covered" >[ lastK(path), 0 ])</span> =&gt;</span>
<span class="cstat-no" title="statement not covered" >    spread(mapDiff(edges.get(n))(path)).reduce(trav, nextPath(path, [ n, w ]));</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return trav(initPath(src));</span>
};
&nbsp;
export const bfs = <span class="fstat-no" title="function not covered" >ed</span>ges =&gt; <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(i</span>Node) =&gt; {</span>
  const bVisit = <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >bP</span>ath =&gt; <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(b</span>Queue) =&gt; {</span></span>
    const pred = <span class="cstat-no" title="statement not covered" >popFirst(bQueue);</span>
    const nextNabes = <span class="cstat-no" title="statement not covered" >mapDiff(edges.get(pred))(bPath);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    spread(nextNabes).reduce(nextPath, bPath);</span>
<span class="cstat-no" title="statement not covered" >    spreadK(nextNabes).reduce(addBinSet, bQueue);</span>
<span class="cstat-no" title="statement not covered" >    return bQueue.size &gt; 0 ? bVisit(bPath)(bQueue) : bPath;</span>
  };
&nbsp;
<span class="cstat-no" title="statement not covered" >  return bVisit(initPath(iNode))(new Set([ iNode ]));</span>
};
&nbsp;
export const dijkstra = <span class="fstat-no" title="function not covered" >ed</span>ges =&gt; <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(i</span>Node) =&gt; {</span>
  const reachables = <span class="cstat-no" title="statement not covered" >bfs(edges)(iNode);</span>
  const inspectQueue = <span class="cstat-no" title="statement not covered" >new Set([ iNode ]);</span>
  const solutionSet = <span class="cstat-no" title="statement not covered" >initPath(iNode);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  while (inspectQueue.size &gt; 0) {</span>
    const pred = <span class="cstat-no" title="statement not covered" >popFirst(inspectQueue);</span>
    const nextNabes = <span class="cstat-no" title="statement not covered" >edges.get(pred);</span>
    const { length: dCount, weight: dWeight } = <span class="cstat-no" title="statement not covered" >solutionSet.get(pred);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    for (const [ nabe, nWeight ] of nextNabes) {</span>
      const prevMap = <span class="cstat-no" title="statement not covered" >reachables.get(nabe) || { length: 1, weight: 0 };</span>
      const { length: rCount, weight: rWeight } = <span class="cstat-no" title="statement not covered" >prevMap;</span>
      const dMap = <span class="cstat-no" title="statement not covered" >{ pred, length: dCount + 1, weight: dWeight + nWeight, };</span>
      const sMap = <span class="cstat-no" title="statement not covered" >((dWeight + nWeight) &lt; rWeight) ? dMap : prevMap;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (!solutionSet.has(nabe)) {</span>
<span class="cstat-no" title="statement not covered" >        inspectQueue.add(nabe);</span>
<span class="cstat-no" title="statement not covered" >        solutionSet.set(nabe, sMap);</span>
      }
    }
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  return solutionSet;</span>
};
&nbsp;
export const components = <span class="fstat-no" title="function not covered" >(e</span>dges) =&gt; {
  const trav = <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(c</span>omp = <span class="branch-0 cbranch-no" title="branch not covered" >new Set,</span> node) =&gt;</span>
<span class="cstat-no" title="statement not covered" >     diff(spreadK(edges.get(node)))(comp).reduce(trav, comp.add(node));</span>
  const visitMap = <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(m</span>Map = <span class="branch-0 cbranch-no" title="branch not covered" >new Map,</span> node) =&gt;</span>
<span class="cstat-no" title="statement not covered" >     diff(trav(new Set, node))(mMap).map(tuple(trav(new Set, node)))</span>
       .reduce(addBinMap, mMap);
&nbsp;
<span class="cstat-no" title="statement not covered" >  return spreadK(edges).reduce(visitMap, new Map);</span>
};
&nbsp;
export const componentSet = <span class="fstat-no" title="function not covered" >ed</span>ges =&gt; <span class="cstat-no" title="statement not covered" >new Set(spreadV(components(edges)));</span>
export const pathBetween = <span class="fstat-no" title="function not covered" >ed</span>ges =&gt; <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >n0</span> =&gt; <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >n1</span> =&gt;</span></span>
<span class="cstat-no" title="statement not covered" >  hasK(components(edges).get(n1))(n0);</span>
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Jan 30 2017 16:25:26 GMT-0500 (EST)
</div>
</div>
<script src="prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="sorter.js"></script>
</body>
</html>
